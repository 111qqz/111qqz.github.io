<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="111qqz的小窝"><meta property="og:type" content="article"><meta property="og:image" content="https://111qqz.github.io/img/2.png"><meta property="twitter:image" content="https://111qqz.github.io/img/2.png"><meta name=title content="hdu 1086  A - You can Solve a Geometry Problem too （线段的规范相交&&非规范相交）"><meta property="og:title" content="hdu 1086  A - You can Solve a Geometry Problem too （线段的规范相交&&非规范相交）"><meta property="twitter:title" content="hdu 1086  A - You can Solve a Geometry Problem too （线段的规范相交&&非规范相交）"><meta name=description content><meta property="og:description" content><meta property="twitter:description" content><meta property="twitter:card" content="summary"><meta name=keyword content="ICPC,111qqz,商汤科技,hust,华中科技大学"><link rel="shortcut icon" href=/img/favicon.ico><title>hdu 1086 A - You can Solve a Geometry Problem too （线段的规范相交&&非规范相交）-111qqz的小窝</title><link rel=canonical href=/2015/11/hdu1086a-youcansolveageometryproblemtoo/><link rel=stylesheet href=/css/iDisqus.min.css><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hux-blog.min.css><link rel=stylesheet href=/css/syntax.css><link rel=stylesheet href=/css/zanshang.css><link href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css rel=stylesheet type=text/css><script src=/js/jquery.min.js></script><script src=/js/bootstrap.min.js></script><script src=/js/hux-blog.min.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/docco.min.css><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=stylesheet href=/css/hux-blog.min.css><link rel=stylesheet href=/css/hux-blog.min-custom.css></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=/>111qqz的小窝</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>Home</a></li><li><a href=/categories/acm/>ACM-ICPC</a></li><li><a href=/categories/deep-learning/>深度学习</a></li><li><a href=/categories/mooc/>公开课</a></li><li><a href=/categories/%e5%85%b6%e4%bb%96/>其他</a></li><li><a href=/top/about/>ABOUT</a></li><li><a href=/search>SEARCH <img src=/img/search.png height=15 style=cursor:pointer alt=Search></a></li></ul></div></div></div></nav><script>var $body=document.body;var $toggle=document.querySelector('.navbar-toggle');var $navbar=document.querySelector('#huxblog_navbar');var $collapse=document.querySelector('.navbar-collapse');$toggle.addEventListener('click',handleMagic)
function handleMagic(e){if($navbar.className.indexOf('in')>0){$navbar.className=" ";setTimeout(function(){if($navbar.className.indexOf('in')<0){$collapse.style.height="0px"}},400)}else{$collapse.style.height="auto"
$navbar.className+=" in";}}</script><style type=text/css>header.intro-header{background-image:url(/img/2.png)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags></div><h1>hdu 1086 A - You can Solve a Geometry Problem too （线段的规范相交&&非规范相交）</h1><h2 class=subheading></h2><span class=meta>Posted by
111qqz
on
Friday, November 6, 2015
<span id=/2015/11/hdu1086a-youcansolveageometryproblemtoo/ class="leancloud_visitors meta_data_item" data-flag-title><span class=post-meta-item-icon><span class="octicon octicon-eye"></span></span><i class="fa fa-eye"></i><span class=old-visitors-count style=display:none></span><span class=leancloud-visitors-count></span></span><script src=https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js></script><script>AV.initialize("2dzJwxGKq4hbtg5R5NM8NTzJ-gzGzoHsz","RaYu8uGTiuiIjLISQppPVYWw");</script><script type=text/javascript>function showTime(Counter){var query=new AV.Query(Counter);var entries=[];var $visitors=$(".leancloud_visitors");$visitors.each(function(){entries.push($(this).attr("id").trim());});query.containedIn('url',entries);query.find().done(function(results){var COUNT_CONTAINER_REF='.leancloud-visitors-count';var OLD_COUNT_CONTAINER_REF='.old-visitors-count';for(var i=0;i<results.length;i++){var item=results[i];var url=item.get('url');var time=item.get('time');var element=document.getElementById(url);$(element).find(COUNT_CONTAINER_REF).text(time);}
for(var i=0;i<entries.length;i++){var url=entries[i];var element=document.getElementById(url);var countSpan=$(element).find(COUNT_CONTAINER_REF);if(countSpan.text()==''){var oldCountSpan=$(element).find(OLD_COUNT_CONTAINER_REF).text();if(oldCountSpan!=''){countSpan.text(0+parseInt(oldCountSpan));}else{countSpan.text(0);}}}}).fail(function(object,error){console.log("Error: "+error.code+" "+error.message);});}
function addCount(Counter){var $visitors=$(".leancloud_visitors");var url=$visitors.attr('id').trim();var title=$visitors.attr('data-flag-title').trim();var query=new AV.Query(Counter);query.equalTo("url",url);query.find({success:function(results){if(results.length>0){var counter=results[0];counter.fetchWhenSave(true);counter.increment("time");counter.save(null,{success:function(counter){var $element=$(document.getElementById(url));$element.find('.leancloud-visitors-count').text(counter.get('time'));},error:function(counter,error){console.log('Failed to save Visitor num, with error message: '+error.message);}});}else{var newcounter=new Counter();var acl=new AV.ACL();acl.setPublicReadAccess(true);acl.setPublicWriteAccess(true);newcounter.setACL(acl);newcounter.set("title",title);newcounter.set("url",url);var OLD_COUNT_CONTAINER_REF='.old-visitors-count';var $element=$(document.getElementById(url));var oldCountSpan=$element.find(OLD_COUNT_CONTAINER_REF).text();if(oldCountSpan!=''){newcounter.set("time",parseInt(oldCountSpan)+1);}else{newcounter.set("time",1);}
newcounter.save(null,{success:function(newcounter){var $element=$(document.getElementById(url));$element.find('.leancloud-visitors-count').text(newcounter.get('time'));},error:function(newcounter,error){console.log('Failed to create');}});}},error:function(error){console.log('Error:'+error.code+" "+error.message);}});}
$(function(){var Counter=AV.Object.extend("Counter");if($('.leancloud_visitors').length==1){addCount(Counter);}else{showTime(Counter);}});</script></span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><header><h2>TOC</h2></header><nav id=TableOfContents></nav><p>A - You can Solve a Geometry Problem too</p><p>**Time Limit:**1000MS **Memory Limit:**32768KB <strong>64bit IO Format:</strong>%I64d & %I64u</p><p>Submit <a href="http://acm.hust.edu.cn/vjudge/contest/view.action?cid=98500#status//A/0">Status</a></p><p>Description</p><p>Many geometry（几何）problems were designed in the ACM/ICPC. And now, I also prepare a geometry problem for this final exam. According to the experience of many ACMers, geometry problems are always much trouble, but this problem is very easy, after all we are now attending an exam, not a contest :)<br>Give you N (1&lt;=N&lt;=100) segments（线段）, please output the number of all intersections（交点）. You should count repeatedly if M (M>2) segments intersect at the same point.</p><p>Note:<br>You can assume that two segments would not intersect at more than one point.</p><p>Input</p><p>Input contains multiple test cases. Each test case contains a integer N (1=N&lt;=100) in a line first, and then N lines follow. Each line describes one segment with four float values x1, y1, x2, y2 which are coordinates of the segment's ending.<br>A test case starting with 0 terminates the input and this test case is not to be processed.</p><p>Output</p><p>For each case, print the number of intersections, and one line one case.</p><p>Sample Input</p><p>2
0.00 0.00 1.00 1.00
0.00 1.00 1.00 0.00
3
0.00 0.00 1.00 1.00
0.00 1.00 1.00 0.000
0.00 0.00 1.00 0.00
0</p><p>Sample Output</p><p>1
3</p><p>给N个线段。问交点总数。</p><p>多条线段相交于同一个点算多次。</p><p>规范相交和非规范相交都算。</p><p>规范相交就是，交点不能是线段的端点。</p><p>而非规范相交可以。</p><p><img src=https://111qqz.com/wp-content/uploads/2015/11/ContractedBlock15.gif alt>
<img src=https://111qqz.com/wp-content/uploads/2015/11/ExpandedBlockStart15.gif alt></p><pre><code>&lt;span style=&quot;color: #008080;&quot;&gt;  1&lt;/span&gt; &lt;span style=&quot;color: #008000;&quot;&gt;/*&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;************************************************************************
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;  2&lt;/span&gt; &lt;span style=&quot;color: #008000;&quot;&gt;    &gt; File Name: code/hdu/1086.cpp
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;  3&lt;/span&gt; &lt;span style=&quot;color: #008000;&quot;&gt;    &gt; Author: 111qqz
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;  4&lt;/span&gt; &lt;span style=&quot;color: #008000;&quot;&gt;    &gt; Email: rkz2013@126.com 
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;  5&lt;/span&gt; &lt;span style=&quot;color: #008000;&quot;&gt;    &gt; Created Time: 2015年11月06日 星期五 13时41分46秒
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;  6&lt;/span&gt; &lt;span style=&quot;color: #008000;&quot;&gt;***********************************************************************&lt;/span&gt;&lt;span style=&quot;color: #008000;&quot;&gt;*/&lt;/span&gt;
&lt;span style=&quot;color: #008080;&quot;&gt;  7&lt;/span&gt; 
&lt;span style=&quot;color: #008080;&quot;&gt;  8&lt;/span&gt; #include&lt;iostream&gt;
&lt;span style=&quot;color: #008080;&quot;&gt;  9&lt;/span&gt; #include&lt;iomanip&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 10&lt;/span&gt; #include&lt;cstdio&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 11&lt;/span&gt; #include&lt;algorithm&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 12&lt;/span&gt; #include&lt;cmath&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 13&lt;/span&gt; #include&lt;cstring&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 14&lt;/span&gt; #include&lt;&lt;span style=&quot;color: #0000ff;&quot;&gt;string&lt;/span&gt;&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 15&lt;/span&gt; #include&lt;map&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 16&lt;/span&gt; #include&lt;&lt;span style=&quot;color: #0000ff;&quot;&gt;set&lt;/span&gt;&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 17&lt;/span&gt; #include&lt;queue&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 18&lt;/span&gt; #include&lt;vector&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 19&lt;/span&gt; #include&lt;stack&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 20&lt;/span&gt; #include&lt;cctype&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 21&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;#define&lt;/span&gt; fst first              
&lt;span style=&quot;color: #008080;&quot;&gt; 22&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;#define&lt;/span&gt; lson l,m,rt&lt;&lt;1
&lt;span style=&quot;color: #008080;&quot;&gt; 23&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;#define&lt;/span&gt; rson m+1,r,rt&lt;&lt;1|1
&lt;span style=&quot;color: #008080;&quot;&gt; 24&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;#define&lt;/span&gt; ms(a,x) memset(a,x,sizeof(a))
&lt;span style=&quot;color: #008080;&quot;&gt; 25&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;using&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;namespace&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; std;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 26&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; dx4[&lt;span style=&quot;color: #800080;&quot;&gt;4&lt;/span&gt;]={&lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt;,&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;,&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;,-&lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;};
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 27&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; dy4[&lt;span style=&quot;color: #800080;&quot;&gt;4&lt;/span&gt;]={&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;,-&lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt;,&lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt;,&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;};
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 28&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt; eps = 1E-&lt;span style=&quot;color: #800080;&quot;&gt;8&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 29&lt;/span&gt; typedef &lt;span style=&quot;color: #0000ff;&quot;&gt;long&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;long&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; LL;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 30&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;#define&lt;/span&gt; sec second
&lt;span style=&quot;color: #008080;&quot;&gt; 31&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; inf = &lt;span style=&quot;color: #800080;&quot;&gt;0x3f3f3f3f&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 32&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; N=&lt;span style=&quot;color: #800080;&quot;&gt;105&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 33&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; n;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 34&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; dblcmp(&lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; d)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 35&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;{
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 36&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; d&lt;-eps?-&lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt;:d&gt;&lt;span style=&quot;color: #000000;&quot;&gt;eps;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 37&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;}
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 38&lt;/span&gt; 
&lt;span style=&quot;color: #008080;&quot;&gt; 39&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;struct&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; point
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 40&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;{
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 41&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; x,y;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 42&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    point(){}
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 43&lt;/span&gt;     point (&lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt; _x,&lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; _y):
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 44&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    x(_x),y(_y){};
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 45&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;void&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; input()
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 46&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 47&lt;/span&gt;     scanf(&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;%lf%lf&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;,&amp;x;,&amp;&lt;span style=&quot;color: #000000;&quot;&gt;y);
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 48&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 49&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    point sub(point p)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 50&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 51&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; point(x-p.x,y-&lt;span style=&quot;color: #000000;&quot;&gt;p.y);
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 52&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 53&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; det(point p)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 54&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 55&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; x*p.y-y*&lt;span style=&quot;color: #000000;&quot;&gt;p.x;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 56&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 57&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;double&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; dot(point p)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 58&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 59&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; x*p.x+y*&lt;span style=&quot;color: #000000;&quot;&gt;p.y;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 60&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 61&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;};
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 62&lt;/span&gt; 
&lt;span style=&quot;color: #008080;&quot;&gt; 63&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;struct&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; line
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 64&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;{
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 65&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    point a,b;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 66&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;void&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; input()
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 67&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 68&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    a.input();
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 69&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    b.input();
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 70&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 71&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; segcrossseg(line v)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 72&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 73&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; d1=&lt;span style=&quot;color: #000000;&quot;&gt;dblcmp(b.sub(a).det(v.a.sub(a)));
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 74&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; d2=&lt;span style=&quot;color: #000000;&quot;&gt;dblcmp(b.sub(a).det(v.b.sub(a)));
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 75&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; d3=&lt;span style=&quot;color: #000000;&quot;&gt;dblcmp(v.b.sub(v.a).det(a.sub(v.a)));
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 76&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; d4=&lt;span style=&quot;color: #000000;&quot;&gt;dblcmp(v.b.sub(v.a).det(b.sub(v.a)));
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 77&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;if&lt;/span&gt; ((d1^d2)==-&lt;span style=&quot;color: #800080;&quot;&gt;2&lt;/span&gt;&amp;&amp;(d3^d4)==-&lt;span style=&quot;color: #800080;&quot;&gt;2&lt;/span&gt;) &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #800080;&quot;&gt;2&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 78&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; (d1==&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&amp;&amp;dblcmp;(v.a.sub(a).dot(v.a.sub(b)))&lt;=&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;||
&lt;span style=&quot;color: #008080;&quot;&gt; 79&lt;/span&gt;         d2==&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&amp;&amp;dblcmp;(v.b.sub(a).dot(v.b.sub(b)))&lt;=&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;||
&lt;span style=&quot;color: #008080;&quot;&gt; 80&lt;/span&gt;         d3==&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&amp;&amp;dblcmp;(a.sub(v.a).dot(a.sub(v.b)))&lt;=&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;||
&lt;span style=&quot;color: #008080;&quot;&gt; 81&lt;/span&gt;         d4==&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&amp;&amp;dblcmp;(b.sub(v.a).dot(b.sub(v.b)))&lt;=&lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;);
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 82&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 83&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;}li[N];
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 84&lt;/span&gt; &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; main()
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 85&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;{
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 86&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;  #ifndef  ONLINE_JUDGE 
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 87&lt;/span&gt;    freopen(&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;in.txt&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;,&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;r&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;,stdin);
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 88&lt;/span&gt;   &lt;span style=&quot;color: #0000ff;&quot;&gt;#endif&lt;/span&gt;
&lt;span style=&quot;color: #008080;&quot;&gt; 89&lt;/span&gt;    
&lt;span style=&quot;color: #008080;&quot;&gt; 90&lt;/span&gt;    &lt;span style=&quot;color: #0000ff;&quot;&gt;while&lt;/span&gt; (~scanf(&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;%d&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;,&amp;n;)!=EOF&amp;&amp;&lt;span style=&quot;color: #000000;&quot;&gt;n)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 91&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 92&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;for&lt;/span&gt; ( &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; i = &lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt; ; i &lt;= n ; i++&lt;span style=&quot;color: #000000;&quot;&gt;) li[i].input();
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 93&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; cnt = &lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 94&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;for&lt;/span&gt; ( &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; i = &lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt; ; i &lt; n ; i++&lt;span style=&quot;color: #000000;&quot;&gt;)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 95&lt;/span&gt;         &lt;span style=&quot;color: #0000ff;&quot;&gt;for&lt;/span&gt; ( &lt;span style=&quot;color: #0000ff;&quot;&gt;int&lt;/span&gt; j = i+&lt;span style=&quot;color: #800080;&quot;&gt;1&lt;/span&gt; ; j &lt;= n ; j++&lt;span style=&quot;color: #000000;&quot;&gt;)
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 96&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;        {
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 97&lt;/span&gt; 
&lt;span style=&quot;color: #008080;&quot;&gt; 98&lt;/span&gt;         &lt;span style=&quot;color: #0000ff;&quot;&gt;if&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt; (li[i].segcrossseg(li[j]))
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt; 99&lt;/span&gt;             cnt++&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;100&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;        }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;101&lt;/span&gt;     printf(&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;%dn&lt;/span&gt;&lt;span style=&quot;color: #800000;&quot;&gt;&quot;&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;,cnt);
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;102&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;    }
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;103&lt;/span&gt; 
&lt;span style=&quot;color: #008080;&quot;&gt;104&lt;/span&gt;   
&lt;span style=&quot;color: #008080;&quot;&gt;105&lt;/span&gt;    
&lt;span style=&quot;color: #008080;&quot;&gt;106&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt; #ifndef ONLINE_JUDGE  
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;107&lt;/span&gt; &lt;span style=&quot;color: #000000;&quot;&gt;  fclose(stdin);
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;108&lt;/span&gt;   &lt;span style=&quot;color: #0000ff;&quot;&gt;#endif&lt;/span&gt;
&lt;span style=&quot;color: #008080;&quot;&gt;109&lt;/span&gt;     &lt;span style=&quot;color: #0000ff;&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;color: #800080;&quot;&gt;0&lt;/span&gt;&lt;span style=&quot;color: #000000;&quot;&gt;;
&lt;/span&gt;&lt;span style=&quot;color: #008080;&quot;&gt;110&lt;/span&gt; }
</code></pre><p>View Code</p><hr><ul class=pager><li class=previous><a href=/2015/11/hdoj2036/ data-toggle=tooltip data-placement=top title="hdoj 2036 (计算几何，叉积求面积)">&larr;
Previous Post</a></li><li class=next><a href=/2015/11/hdu3264open-airshoppingmalls/ data-toggle=tooltip data-placement=top title="hdu 3264 Open-air shopping malls(求圆相交的面积，二分）">Next
Post &rarr;</a></li></ul><div class=post-comment><span id=/2015/11/hdu1086a-youcansolveageometryproblemtoo/ class=leancloud_visitors data-flag-title="hdu 1086  A - You can Solve a Geometry Problem too （线段的规范相交&&非规范相交）"><span class=post-meta-item-text>访问量</span>
<span class=leancloud-visitors-count></span><p></p></span><div id=vcomments></div><script src=//cdn1.lncld.net/static/js/3.0.4/av-min.js></script><script src=//unpkg.com/valine/dist/Valine.min.js></script><script type=text/javascript>new Valine({el:'#vcomments',appId:'2dzJwxGKq4hbtg5R5NM8NTzJ-gzGzoHsz',appKey:'RaYu8uGTiuiIjLISQppPVYWw',notify:true,verify:false,avatar:'retro',placeholder:'说点什么吧...',visitor:true});</script></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"><section><hr class="hidden-sm hidden-xs"><h5><a href=/tags/>FEATURED TAGS</a></h5><div class=tags><a href=/tags/bfs title=bfs>bfs</a>
<a href=/tags/binary-search title=binary-search>binary-search</a>
<a href=/tags/brute-force title=brute-force>brute-force</a>
<a href=/tags/dfs title=dfs>dfs</a>
<a href=/tags/dp title=dp>dp</a>
<a href=/tags/greedy title=greedy>greedy</a>
<a href=/tags/kmp title=kmp>kmp</a>
<a href=/tags/leetcode title=leetcode>leetcode</a>
<a href=/tags/math title=math>math</a>
<a href=/tags/number-theory title=number-theory>number-theory</a>
<a href=/tags/rmq title=rmq>rmq</a>
<a href=/tags/stl title=stl>stl</a>
<a href=/tags/%E5%89%8D%E7%BC%80%E5%92%8C title=前缀和>前缀和</a>
<a href=/tags/%E5%8D%9A%E5%BC%88%E8%AE%BA title=博弈论>博弈论</a>
<a href=/tags/%E5%9B%BE%E8%AE%BA title=图论>图论</a>
<a href=/tags/%E5%BF%AB%E9%80%9F%E5%B9%82 title=快速幂>快速幂</a>
<a href=/tags/%E6%95%B0%E4%BD%8Ddp title=数位dp>数位dp</a>
<a href=/tags/%E6%9E%84%E9%80%A0 title=构造>构造</a>
<a href=/tags/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84 title=树状数组>树状数组</a>
<a href=/tags/%E6%A8%A1%E6%8B%9F title=模拟>模拟</a>
<a href=/tags/%E6%AF%8D%E5%87%BD%E6%95%B0 title=母函数>母函数</a>
<a href=/tags/%E7%9F%A9%E9%98%B5 title=矩阵>矩阵</a>
<a href=/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91 title=线段树>线段树</a>
<a href=/tags/%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95 title=计算几何>计算几何</a></div></section><section><hr><h5>FRIENDS</h5><ul class=list-inline><li><a target=_blank href=https://111qqz.com>111qqz的wordpress博客</a></li></ul></section></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href rel=alternate type=application/rss+xml title=111qqz的小窝><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-rss fa-stack-1x fa-inverse"></i></span></a></li><li><a href=mailto:hust.111qqz@gmail.com><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=/img/wechat.jpg><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-wechat fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/111qqz/><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-github fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; 111qqz的小窝 2022<br><a href=https://beian.miit.gov.cn/>粤ICP备18103363号</a><br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function async(u,c){var d=document,t='script',o=d.createElement(t),s=d.getElementsByTagName(t)[0];o.src=u;if(c){o.addEventListener('load',function(e){c(null,e);},false);}
s.parentNode.insertBefore(o,s);}</script><script>if($('#tag_cloud').length!==0){async("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:'#bbbbee',end:'#0085a1'},};$('#tag_cloud a').tagcloud();})}</script><script>async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js",function(){var $nav=document.querySelector("nav");if($nav)FastClick.attach($nav);})</script></body></html>