---
author: 111qqz
date: 2017-10-02 02:24:09+00:00
draft: false
title: codeforces 385 E. Bear in the Field (先记录想法）
type: post
url: /2017/10/codeforces-div2-385e/
categories:
- ACM
tags:
- 快速幂
- 矩阵
---

[题目链接](http://codeforces.com/problemset/problem/385/E)



# 题意：



有一只熊，初始在(sx,sy)处，如果当前的位置在(x,y)，那么下一秒会在((x+dx-1)%n+1,(y+dy-1)%n+1)处， dx[i] = k[i-1] + dx[i-1],dy[i]=k[i-1] + dy[i-1]，k表示的是某个点的花丛数目。

初始点(x,y)的花丛数为x+y,每经过一个时间，所有点的花丛数增加1.

所以，k[i] = x[i] + y[i] + i-1，现在问经过时间t后，熊的位置在哪里。也就是x[t],y[t]的值。



# 思路：



我们不妨先只考虑x方向的，因为y方向完全相同。

观察x[t]的式子， _**x[t] = (x[t-1] + dx[t-1] -1) % n +1**_。。这个%n之后+1简直蛋疼得一逼。。。

我们不妨构造_**g[t] = x[t]-1**_，这样原式子就变成了 _**g[t] = (g[t-1] + dx[t-1]) %n** _...看起来爽了很多。。。

观察式子_**g[t] = (g[t-1] + dx[t-1]) % n**_，我们发现这是一个前缀和的形式。

根据在[hdu4686解题报告](https://111qqz.com/wordpress/2017/10/hdu4686/)  中提到的经验，对于求和的式子，我们只需要考虑每一项的构造法。

因此问题转化成构造矩阵dx[t]

_**dx[t] = k[t-1] + dx[t-1]**_

其中_**k[t] = x[t] + y[t] + t-1,**_我们写成gx[t]和gy[t]的形式

有**_k[t] = gx[t] + gy[t] + t + 1_**

而_**k[t-1] = gx[t-1] + gy[t-1] + t**_

因此可以得到k[t-1]与k[t]之间的递推关系:_** k[t] = k[t-1] + dx[t-1] + dy[t-1] + 1**_

**观察到k[t]的表达式中同时包含dx,dy项，因此之前考虑的单独处理x和y的想法应该是行不通的**。我们考虑同事处理x,y。




