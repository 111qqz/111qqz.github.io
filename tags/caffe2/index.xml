<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>caffe2 on 111qqz的小窝</title><link>https://111qqz.com/tags/caffe2/</link><description>Recent content in caffe2 on 111qqz的小窝</description><generator>Hugo -- gohugo.io</generator><language>en</language><copyright>Copyright © 2012-2022 all rights reserved.</copyright><lastBuildDate>Fri, 13 Apr 2018 03:08:19 +0000</lastBuildDate><atom:link href="https://111qqz.com/tags/caffe2/index.xml" rel="self" type="application/rss+xml"/><item><title>caffe2 添加自定义operater</title><link>https://111qqz.com/2018/04/add-custom-operation-in-caffe2/</link><pubDate>Fri, 13 Apr 2018 03:08:19 +0000</pubDate><guid>https://111qqz.com/2018/04/add-custom-operation-in-caffe2/</guid><description>
记录一些一个没有之前没有接触过caffe/caffe2的人为了添加自定义的op 到caffe2需要做的工作.
首先参考caffe2 tutorial,随便跑个op来试试,不妨以比较简单的 Accumulate_op 为例子.
这个op的作用就是计算Y=X+gamma*Y, 其中X为输入,Y为输出,gamma是参数.
跑起来这个运算所需要的代码如下:
from caffe2.python import workspace, model_helper import numpy as np # Create the input data data = np.arange(6).reshape(2,3).astype(np.float32) print (&amp;quot;data=&amp;quot;,data) # Create labels for the data as integers [0, 9]. workspace.FeedBlob(&amp;quot;data&amp;quot;, data) # Create model using a model helper m = model_helper.ModelHelper(name=&amp;quot;my first net&amp;quot;) output = m.net.Accumulate([&amp;quot;data&amp;quot;], &amp;quot;output&amp;quot;) print(m.net.Proto()) workspace.RunNetOnce(m.param_init_net) workspace.CreateNet(m.net) workspace.RunNet(m.name,2) # run 2 times print(&amp;quot;output=&amp;quot;,workspace.FetchBlob('output')) c之后我们仿照caffe2/operators/accumultate_op.h和affe2/operators/accumultate_op.cc,仿写一个我们自己的运算atest_op.h和atest_op.cc
实现的功能为Y=5X+gammaY
 #include &amp;quot;caffe2/operators/atest_op.</description></item></channel></rss>