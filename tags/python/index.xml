<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Python on 111qqz的小窝</title><link>https://111qqz.com/tags/python/</link><description>Recent content in Python on 111qqz的小窝</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>Copyright © 2012-2022 all rights reserved.</copyright><lastBuildDate>Sun, 17 Dec 2023 18:22:24 +0800</lastBuildDate><atom:link href="https://111qqz.com/tags/python/index.xml" rel="self" type="application/rss+xml"/><item><title>[施工中] cupy与torch的导入顺序不同对计算结果的影响</title><link>https://111qqz.com/2023/12/cupy-torch-import-order-impact/</link><pubDate>Sun, 17 Dec 2023 18:22:24 +0800</pubDate><guid>https://111qqz.com/2023/12/cupy-torch-import-order-impact/</guid><description>
&lt;h2 id="背景"&gt;背景&lt;/h2&gt;
&lt;p&gt;公司内部的基于torch的toolbox发现某个版本之后,结果发生了偏移. 通过一系列排查,发现当导入cupy和torch的顺序不同时，计算结果会有所差异。
也就是说,如下两段代码会导致模型训练等环节的计算得到不同的结果.&lt;/p&gt;</description></item><item><title>爬虫学习笔记</title><link>https://111qqz.com/2018/10/web-crawler-notes/</link><pubDate>Fri, 19 Oct 2018 08:18:53 +0000</pubDate><guid>https://111qqz.com/2018/10/web-crawler-notes/</guid><description>
&lt;p&gt;再次迫于生计。。。&lt;/p&gt;
&lt;p&gt;参考了&lt;a href="https://www.v2ex.com/t/370455#reply9"&gt;面向新人的 Python 爬虫学习资料&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;大致的学习路线为:&lt;/p&gt;
&lt;blockquote&gt;一： 简单的定向脚本爬虫（ request --- bs4 --- re ）
&lt;p&gt;二： 大型框架式爬虫（ Scrapy 框架为主）&lt;/p&gt;
&lt;p&gt;三：浏览器模拟爬虫 （ Mechanize 模拟 和 Selenium 模拟）&lt;/blockquote&gt;&lt;/p&gt;</description></item><item><title>使用python计算误差代码</title><link>https://111qqz.com/2018/08/calculate-error-with-python/</link><pubDate>Mon, 06 Aug 2018 11:54:35 +0000</pubDate><guid>https://111qqz.com/2018/08/calculate-error-with-python/</guid><description>
&lt;p&gt;import os
import math
ave_err=0.0
max_err=0.0
max_err_rate=0.0
length=0
with open(&amp;quot;cpu_result.txt&amp;quot;,&amp;quot;r&amp;quot;) as fp1, open(&amp;quot;cuda_ppl_result.txt&amp;quot;,&amp;quot;r&amp;quot;) as fp2:
for l1 in fp1:
l2 = fp2.readline()
l1=l1[:-2]
l2=l2[:-2]
lst = l1.split(' ')
lst2 = l2.split(' ')
#print lst
lst = [float(x) for x in lst ]
length = length + len(lst)
lst2 = [float(x) for x in lst2]
#print (lst)
#print (lst2)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; for index,x in enumerate(lst):
y = lst2[index]
ave_err = ave_err + abs(x-y)
max_err = max(max_err,abs(x-y))
max_err_rate = max(max_err_rate,abs(x-y)/x)
print(&amp;quot;len=&amp;quot;,length)
print(&amp;quot;max_err=&amp;quot;,max_err)
print(&amp;quot;max_err_rate=&amp;quot;,max_err_rate*100,&amp;quot;%&amp;quot;)
print(&amp;quot;ave_err=&amp;quot;,ave_err/length)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;需要提供两个文件，并且两个文件的数据格式相同。&lt;/p&gt;</description></item><item><title>pytorch 函数笔记</title><link>https://111qqz.com/2018/02/pytorch-function-notes/</link><pubDate>Fri, 23 Feb 2018 02:55:25 +0000</pubDate><guid>https://111qqz.com/2018/02/pytorch-function-notes/</guid><description>
&lt;p&gt;记录一些常用的...总去查文档也是有点麻烦&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; *
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="tensorview-的作用是reshape-比如a--torchrange1-16-得到一个tensor-that-has-16-elements-from-1-to-16-在aaview44就得到了一个44的tensor-需要注意reshape之后元素的个数不能改变1644-参数-1的作用是我懒得算这一维度应该是多少由于元素个数不能改变所以希望自动被计算需要注意的是只有一个维度可以写-1不过view和reshape有些区别reshape-always-copies-memory-view-never-copies-memory"&gt;tensor.view 的作用是reshape 比如 a = torch.range(1, 16) 得到一个tensor  that has 16 elements from 1 to 16. 在a=a.view(4,4)就得到了一个4&lt;em&gt;4的tensor。 需要注意reshape之后元素的个数不能改变(16==4&lt;/em&gt;4)  参数-1的作用是，我懒得算这一维度应该是多少,（由于元素个数不能改变）所以希望自动被计算。**需要注意的是，只有一个维度可以写-1。 **不过view和reshape有些区别：&lt;em&gt;reshape always copies memory. view never copies memory&lt;/em&gt;&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt; *
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="torchsqueeze将输入张量形状中的1去除并返回-如果输入是形如a1b1c1d那么输出形状就为abcd当给定dim时那么挤压操作只在给定维度上例如输入形状为a1bsqueezeinput-0将会保持张量不变只有用squeezeinput-1形状会变成ab注意-返回张量与输入张量共享内存所以改变其中一个的内容会改变另一个"&gt;torch.squeeze  将输入张量形状中的&lt;code&gt;1&lt;/code&gt; 去除并返回。 如果输入是形如(A×1×B×1×C×1×D)，那么输出形状就为： (A×B×C×D)当给定&lt;code&gt;dim&lt;/code&gt;时，那么挤压操作只在给定维度上。例如，输入形状为: (A×1×B), &lt;code&gt;squeeze(input, 0)&lt;/code&gt; 将会保持张量不变，只有用 &lt;code&gt;squeeze(input, 1)&lt;/code&gt;，形状会变成 (A×B)。注意： 返回张量与输入张量共享内存，所以改变其中一个的内容会改变另一个。&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt; *
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="torchunsqueeze返回一个新的张量对输入的制定位置插入维度-1-注意-返回张量与输入张量共享内存所以改变其中一个的内容会改变另一个如果dim为负则将会被转化diminputdim1"&gt;torch.unsqueeze  返回一个新的张量，对输入的制定位置插入维度 1 注意： 返回张量与输入张量共享内存，所以改变其中一个的内容会改变另一个。如果&lt;code&gt;dim&lt;/code&gt;为负，则将会被转化dim+input.dim()+1&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;&amp;gt;&amp;gt;&amp;gt; x = torch.Tensor([1, 2, 3, 4])
&amp;gt;&amp;gt;&amp;gt; torch.unsqueeze(x, 0)
1 2 3 4
[torch.FloatTensor of size 1x4]
&amp;gt;&amp;gt;&amp;gt; torch.unsqueeze(x, 1)
1
2
3
4
[torch.FloatTensor of size 4x1]
*
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="tensorexpandsize-扩展tensor可以保持维度数目不变每一维度的size增加比如ab变到cd其中cadb-1参数表示某一个维度的size不发生改变--有可以扩展tensor到更多的维度新增加的维度会默认放在最前面并且不能以-1作为参数"&gt;tensor.expand(&lt;em&gt;size)   扩展tensor.可以保持维度数目不变，每一维度的size增加(比如A&lt;/em&gt;B变到C*D,其中C&amp;gt;=A,D&amp;gt;=B).-1参数表示某一个维度的size不发生改变  . 有可以扩展tensor到更多的维度，新增加的维度会默认放在最前面，并且不能以-1作为参数。&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt; *
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="tensorcontiguous-将一个tensor变成连续的一些ops如expandexpand_"&gt;&lt;strong&gt;tensor.contiguous  将一个tensor变成连续的。（一些ops如expand/expand_as会让tensor 不连续）&lt;/strong&gt;&lt;/h3&gt;</description></item><item><title>正则匹配中文及常用正则表达式 (转载)</title><link>https://111qqz.com/2017/12/Common-regular-expression/</link><pubDate>Mon, 04 Dec 2017 11:34:06 +0000</pubDate><guid>https://111qqz.com/2017/12/Common-regular-expression/</guid><description>
&lt;p&gt;先放一个同事安利给我的网站:&lt;a href="https://regex101.com/"&gt;regex101&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://unicode-table.com/cn"&gt;查询匹配的中文字符unicode编码&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;正则表达式用于字符串处理、表单验证、日志数据分析等场合，实用高效。现将自己走网上搜索并总结的常用方法收集了一下：&lt;/p&gt;</description></item><item><title>python只获取当前目录下的文件夹及文件名</title><link>https://111qqz.com/2017/08/python-get-dir-name-in-current-path/</link><pubDate>Wed, 16 Aug 2017 08:21:41 +0000</pubDate><guid>https://111qqz.com/2017/08/python-get-dir-name-in-current-path/</guid><description>
&lt;p&gt;list = os.listdir(rootdir)#列出目录下的所有文件和目录
for line in list:
filepath = os.path.join(rootdir,line)
if os.path.isdir(filepath):#如果filepath是目录
print &amp;quot;dir:&amp;quot; + filepath
else:
print &amp;quot;file:&amp;quot; + filepath&lt;/p&gt;</description></item><item><title>python numpy 用法 简明手册</title><link>https://111qqz.com/2017/07/python-numpy-notes/</link><pubDate>Mon, 24 Jul 2017 03:08:35 +0000</pubDate><guid>https://111qqz.com/2017/07/python-numpy-notes/</guid><description>
&lt;p&gt;&lt;a href="https://zhuanlan.zhihu.com/p/20878530?refer=intelligentunit"&gt;原文链接&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;感谢stanford,感谢原作者的翻译，我调整了一下代码格式，可以当做手册来用了，毕竟之前没怎么写过py 23333&lt;/p&gt;
&lt;blockquote&gt;**译者注**：本文[智能单元](https://zhuanlan.zhihu.com/intelligentunit)首发，翻译自斯坦福CS231n课程笔记[Python Numpy Tutorial](http://link.zhihu.com/?target=http//cs231n.github.io/python-numpy-tutorial/)，由课程教师[Andrej Karpathy](http://link.zhihu.com/?target=http//cs.stanford.edu/people/karpathy/)授权进行翻译。本篇教程由[杜客](https://www.zhihu.com/people/du-ke)翻译完成，[Flood Sung](https://www.zhihu.com/people/flood-sung)、[SunisDown](https://www.zhihu.com/people/sunisdown)、[巩子嘉](https://www.zhihu.com/people/gong-zi-jia-57)和一位不愿透露ID的知友对本翻译亦有贡献。
&lt;blockquote&gt;
&lt;h2 id="原文如下"&gt;原文如下&lt;/h2&gt;&lt;/blockquote&gt;
&lt;p&gt;这篇教程由&lt;a href="http://link.zhihu.com/?target=http//cs.stanford.edu/people/jcjohns/"&gt;Justin Johnson&lt;/a&gt;创作。&lt;/p&gt;</description></item><item><title>libgfortran.so.4 missing under archlinux</title><link>https://111qqz.com/2017/06/libgfortran-so-4-missing-under-archlinux/</link><pubDate>Fri, 09 Jun 2017 20:12:41 +0000</pubDate><guid>https://111qqz.com/2017/06/libgfortran-so-4-missing-under-archlinux/</guid><description>
&lt;p&gt;。。。哭了哦。。终于解决了这个bug&lt;/p&gt;
&lt;p&gt;参考资料：&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ContinuumIO/anaconda-issues/issues/686"&gt;libgfortran broken? &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/conda/conda/issues/2177"&gt;libgfortran=3.0 should not be install with numpy &amp;lt;= 1.9&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=226849"&gt; [SOLVED] libgfortran.so.3:cannot open shared object file: No such file&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[Replacing gcc-libs-libs with gcc-multilib &lt;a href="https://www.reddit.com/r/linuxquestions/comments/1oul6x/replacing_gcclibslibs_with_gccmultilib_arch/"&gt;arch&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://bbs.archlinux.org/viewtopic.php?id=226723"&gt;conflict with gcc-libs and gcc-libs-multilib on latest update&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一开始以为是anaconda相关。。。搞了半天。。。&lt;/p&gt;</description></item><item><title>conda升级anaconda　ValueError的解决办法</title><link>https://111qqz.com/2017/06/how-to-fix-conda-upgrade-valueerror/</link><pubDate>Thu, 08 Jun 2017 13:03:51 +0000</pubDate><guid>https://111qqz.com/2017/06/how-to-fix-conda-upgrade-valueerror/</guid><description>
&lt;p&gt;conda update anaconda　后提示&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ValueError: unsupported format character ')' (0x29) at index 49
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;查到了这个：&lt;a href="https://github.com/conda/conda/issues/564"&gt;anaconda update issue&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;I have narrowed this down to the following packages:
&lt;table &gt;
&lt;tr &gt;
package
build
&lt;/tr&gt;
&lt;tbody &gt;
&lt;tr &gt;
&lt;blockquote&gt;
&lt;td &gt;psutil-1.2.1
&lt;/td&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;td &gt;py27_0 hard-link
&lt;/td&gt;&lt;/blockquote&gt;
&lt;/tr&gt;
&lt;tr &gt;
&lt;blockquote&gt;
&lt;td &gt;pycparser-2.10
&lt;/td&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;td &gt;py27_0 hard-link
&lt;/td&gt;&lt;/blockquote&gt;
&lt;/tr&gt;
&lt;tr &gt;
&lt;blockquote&gt;
&lt;td &gt;pykit-0.1.0
&lt;/td&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;td &gt;np18py27_2 hard-link
&lt;/td&gt;&lt;/blockquote&gt;
&lt;/tr&gt;
&lt;tr &gt;
&lt;blockquote&gt;
&lt;td &gt;pyparsing-2.0.1
&lt;/td&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;td &gt;py27_0 hard-link
&lt;/td&gt;&lt;/blockquote&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
by calling "conda install anaconda" and then successfully installing everything else one at a time.
These four packages consistently exhibit the described behaviour.
(note: pykit depends on pycparser so may itself be ok - can't tell)&lt;/blockquote&gt;
&lt;p&gt;我先把psutil卸载掉，重新update了一下，成功。&lt;/p&gt;</description></item><item><title>数字图像处理大作业(初步）</title><link>https://111qqz.com/2017/06/digital-image-processing-course-final-project/</link><pubDate>Wed, 07 Jun 2017 06:53:36 +0000</pubDate><guid>https://111qqz.com/2017/06/digital-image-processing-course-final-project/</guid><description>
&lt;p&gt;...先随便记录一下好了。。。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt; * 神经网络识别数字或者字母？
* 识别车牌号？
* not hot dog?
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;安装python pandas &lt;a href="http://pandas.pydata.org/pandas-docs/stable/install.html"&gt;pandas&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;发现之前装caffe的时候...装了这个东西。。。&lt;/p&gt;</description></item><item><title>vim下python 的配置</title><link>https://111qqz.com/2017/06/vimrc-for-python/</link><pubDate>Wed, 07 Jun 2017 06:21:12 +0000</pubDate><guid>https://111qqz.com/2017/06/vimrc-for-python/</guid><description>
&lt;h3 id="由于最近要做数字图像处理的大作业以及之后一段时间估计写python多一些所以打算花些时间配置下vim"&gt;由于最近要做数字图像处理的大作业，以及之后一段时间，估计写python多一些，所以打算花些时间配置下vim.&lt;/h3&gt;
&lt;h2 id="1-一键执行"&gt;1. 一键执行&lt;/h2&gt;
&lt;h4 id="其实之前一直有的不过没有效果就没有管发现问题是python对应的filetype为python而不是py"&gt;其实之前一直有的。。不过没有效果，就没有管。发现问题是，python对应的filetype为&amp;quot;python&amp;quot;，而不是&amp;quot;py&amp;quot;&lt;/h4&gt;
&lt;pre&gt;&lt;code&gt;func! CompileRunGcc()
exec &amp;quot;w&amp;quot;
if &amp;amp;filetype == 'c'
exec &amp;quot;!g++ % -o %&amp;lt;&amp;quot;
exec &amp;quot;! ./%&amp;lt;&amp;quot;
elseif &amp;amp;filetype == 'cpp'
exec &amp;quot;!g++ % -std=gnu++11 -Wall -o %&amp;lt;&amp;quot;
exec &amp;quot;! ./%&amp;lt;&amp;quot;
elseif &amp;amp;filetype == 'java'
exec &amp;quot;!javac %&amp;quot;
exec &amp;quot;!java %&amp;lt;&amp;quot;
elseif &amp;amp;filetype == 'sh'
:!./%
elseif &amp;amp;filetype == 'python'
&amp;quot; exec &amp;quot;!python %&amp;quot;
&amp;quot; exec &amp;quot;!python %&amp;lt;&amp;quot;
exec &amp;quot;!python2.7 %&amp;quot;
endif
endfunc
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id="2代码补全"&gt;&lt;strong&gt;2.代码补全&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="不想折腾了既然ycm也支持python就先用用看好了不行再换别的"&gt;不想折腾了。。既然ycm也支持python,就先用用看好了。。不行再换别的。&lt;/h3&gt;
&lt;h3 id="放一段ycmfor-python的配置文件"&gt;放一段ycm　for python的配置文件&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;默认配置文件路径&amp;quot;
let g:ycm_global_ycm_extra_conf = '~/.ycm_extra_conf.py'
&amp;quot;打开vim时不再询问是否加载ycm_extra_conf.py配置&amp;quot;
let g:ycm_confirm_extra_conf=0
set completeopt=longest,menu
&amp;quot;python解释器路径&amp;quot;
let g:ycm_path_to_python_interpreter='/usr/bin/python'
&amp;quot;是否开启语义补全&amp;quot;
let g:ycm_seed_identifiers_with_syntax=1
&amp;quot;是否在注释中也开启补全&amp;quot;
let g:ycm_complete_in_comments=1
let g:ycm_collect_identifiers_from_comments_and_strings = 0
&amp;quot;开始补全的字符数&amp;quot;
let g:ycm_min_num_of_chars_for_completion=2
&amp;quot;补全后自动关机预览窗口&amp;quot;
let g:ycm_autoclose_preview_window_after_completion=1
&amp;quot; 禁止缓存匹配项,每次都重新生成匹配项&amp;quot;
let g:ycm_cache_omnifunc=0
&amp;quot;字符串中也开启补全&amp;quot;
let g:ycm_complete_in_strings = 1
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id="3-语法检查"&gt;&lt;strong&gt;3. 语法检查&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="syntastic大家都知道了看到了异步检测插件ale打算试一下"&gt;Syntastic大家都知道了。。。。看到了&lt;a href="https://zhuanlan.zhihu.com/p/23317292"&gt;异步检测插件ALE&lt;/a&gt;，打算试一下。&lt;/h3&gt;
&lt;h3 id="ale_"&gt;&lt;a href="https://github.com/w0rp/ale"&gt;ale_github&lt;/a&gt;&lt;/h3&gt;
&lt;h3 id="需要注意的是这个插件需要vim-80的特性"&gt;需要注意的是，这个插件需要vim 8.0+的特性。。。&lt;/h3&gt;
&lt;h3 id="放一波配置文件"&gt;放一波配置文件&lt;/h3&gt;
&lt;pre&gt;&lt;code&gt;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;for ale begin &amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;&amp;quot;
let g:ale_sign_column_always = 1 &amp;quot;保持侧边栏可见：
let g:ale_sign_error = '&amp;gt;&amp;gt;' &amp;quot;改变错误和警告标识符
let g:ale_sign_warning = '--'
let g:ale_statusline_format = ['⨉ %d', '⚠ %d', '⬥ ok'] &amp;quot;改变状态栏信息格式
&amp;quot;自定义跳转错误行快捷键：
nmap &amp;lt;silent&amp;gt; &amp;lt;C-k&amp;gt; &amp;lt;Plug&amp;gt;(ale_previous_wrap)
nmap &amp;lt;silent&amp;gt; &amp;lt;C-j&amp;gt; &amp;lt;Plug&amp;gt;(ale_next_wrap)
&amp;quot;消除某excption not caught的警告
let g:ale_emit_conflict_warnings = 0
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id="4-编程提示jedi-vim"&gt;&lt;strong&gt;4. 编程提示(jedi-vim)&lt;/strong&gt;&lt;/h2&gt;
&lt;h3 id="据说是vim写python的神器装来看看"&gt;　据说是vim写python的神器。。。装来看看。。。&lt;/h3&gt;
&lt;h3 id="据说默认配置就够了先不折腾了"&gt;据说默认配置就够了，先不折腾了&lt;/h3&gt;
&lt;h3&gt;&lt;/h3&gt;
&lt;h3&gt;&lt;/h3&gt;</description></item></channel></rss>