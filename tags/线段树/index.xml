<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>线段树 on 111qqz的小窝</title><link>https://111qqz.com/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/</link><description>Recent content in 线段树 on 111qqz的小窝</description><generator>Hugo -- gohugo.io</generator><language>zh</language><copyright>Copyright © 2012-2022 all rights reserved.</copyright><lastBuildDate>Wed, 01 Nov 2017 02:19:00 +0000</lastBuildDate><atom:link href="https://111qqz.com/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/index.xml" rel="self" type="application/rss+xml"/><item><title>BZOJ 1230: [Usaco2008 Nov]lites 开关灯 (线段树区间修改，区间查询)</title><link>https://111qqz.com/2017/11bzoj-1230/</link><pubDate>Wed, 01 Nov 2017 02:19:00 +0000</pubDate><guid>https://111qqz.com/2017/11bzoj-1230/</guid><description>
&lt;h2 id="1230-usaco2008-novlites-开关灯">1230: [Usaco2008 Nov]lites 开关灯&lt;/h2>
&lt;p>Time Limit: 10 Sec  Memory Limit: 162 MB
Submit: 1676  Solved: 874
[&lt;a href="http://www.lydsy.com/JudgeOnline/submitpage.php?id=1230">Submit&lt;/a>][&lt;a href="http://www.lydsy.com/JudgeOnline/problemstatus.php?id=1230">Status&lt;/a>][&lt;a href="http://www.lydsy.com/JudgeOnline/bbs.php?id=1230">Discuss&lt;/a>]&lt;/p>
&lt;h2 id="description">Description&lt;/h2>
&lt;p>Farmer John尝试通过和奶牛们玩益智玩具来保持他的奶牛们思维敏捷. 其中一个大型玩具是牛栏中的灯. N (2 &amp;lt;= N &amp;lt;= 100,000) 头奶牛中的每一头被连续的编号为1..N, 站在一个彩色的灯下面.刚到傍晚的时候, 所有的灯都是关闭的. 奶牛们通过N个按钮来控制灯的开关; 按第i个按钮可以改变第i个灯的状态.奶牛们执行M (1 &amp;lt;= M &amp;lt;= 100,000)条指令, 每个指令都是两个整数中的一个(0 &amp;lt;= 指令号 &amp;lt;= 1). 第1种指令(用0表示)包含两个数字S_i和E_i (1 &amp;lt;= S_i &amp;lt;= E_i &amp;lt;= N), 它们表示起始开关和终止开关. 奶牛们只需要把从S_i到E_i之间的按钮都按一次, 就可以完成这个指令. 第2种指令(用1表示)同样包含两个数字S_i和E_i (1 &amp;lt;= S_i &amp;lt;= E_i &amp;lt;= N), 不过这种指令是询问从S_i到E_i之间的灯有多少是亮着的. 帮助FJ确保他的奶牛们可以得到正确的答案.&lt;/p></description></item><item><title>hdu 3642 Get The Treasury (线段树+扫描线，求长方体体积交)</title><link>https://111qqz.com/2017/09hdu-3642/</link><pubDate>Fri, 29 Sep 2017 10:34:09 +0000</pubDate><guid>https://111qqz.com/2017/09hdu-3642/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=3642">hdu3642题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出若干个（1000）长方体，求&lt;strong>至少交三次&lt;/strong>的空间的体积。&lt;/p>
&lt;p>尺寸为[x1,x2],[y1,y2],[z1,z2],其中x，y的坐标的绝对值不超过1E6,Z的坐标的绝对值不超过1E9.&lt;/p></description></item><item><title>hdu 1828 Picture （线段树+扫描线 求 矩形周长并）</title><link>https://111qqz.com/2017/09hdu1828/</link><pubDate>Thu, 28 Sep 2017 05:44:47 +0000</pubDate><guid>https://111qqz.com/2017/09hdu1828/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=1828">题目链接&lt;/a>&lt;/p>
&lt;h1 id="题意">题意:&lt;/h1>
&lt;p>求矩形周长并。&lt;/p>
&lt;h1 id="思路">思路：&lt;/h1>
&lt;p>线段树+扫描线。&lt;/p>
&lt;p>和前面的求面积并比较类似，我们先考虑平行x轴的线段，考虑线段树，维护的一段区间中被矩形覆盖的次数cnt和至少覆盖一次的长度的len.&lt;/p></description></item><item><title>hdu 1255 覆盖的面积 (扫描线+线段树 求矩形面积交)</title><link>https://111qqz.com/2017/09hdu1255/</link><pubDate>Wed, 27 Sep 2017 13:20:23 +0000</pubDate><guid>https://111qqz.com/2017/09hdu1255/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=1255">题目链接&lt;/a>&lt;/p>
&lt;h1 id="题意">题意：&lt;/h1>
&lt;p>求n（1000）个矩形的面积交，也就&lt;strong>是至少有2个矩形覆盖的区域的面积&lt;/strong>。&lt;/p>
&lt;h1 id="思路">思路：&lt;/h1>
&lt;p>和&lt;a href="https://111qqz.com/wordpress/2017/09/hdu1542/">矩形面积并_hdu1542解题报告   &lt;/a> 类似&lt;/p>
&lt;p>面积并问题中，线段树len维护的是至少覆盖一次的区域的长度&lt;/p>
&lt;p>在面积交的问题中，我们需要多维护一个&amp;quot;至少覆盖两次的区域的长度&amp;quot;的域（设为double two;）&lt;/p></description></item><item><title>hdu 1542 Atlantis (线段树+扫描线求矩形面积并，模板题)</title><link>https://111qqz.com/2017/09hdu-1542/</link><pubDate>Wed, 27 Sep 2017 10:59:46 +0000</pubDate><guid>https://111qqz.com/2017/09hdu-1542/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=1542">hdu1542题目链接&lt;/a>&lt;/p>
&lt;h1 id="题意">题意：&lt;/h1>
&lt;p>求n(100)个矩形的面积并。&lt;/p>
&lt;h1 id="思路">思路：&lt;/h1>
&lt;p>扫描线+线段树&lt;/p>
&lt;p>题目是2000年中欧区域赛的题目，虽然年代久远，但是有好几个点还是很值得学习的。&lt;/p>
&lt;h4 id="首先是">&lt;em>首先是&lt;strong>离散化的适用范围:&lt;/strong>&lt;/em>&lt;/h4>
&lt;h4 id="之前比较常用的是将比较大的整数值离散化常常是因为数值太大无法作为下标">&lt;em>之前比较常用的是将比较大的整数值离散化，常常是因为数值太大无法作为下标。&lt;/em>&lt;/h4>
&lt;h4 id="那么其实浮点数有的时候也需要进行离散化比如作为数组的下标比如用来枚举">&lt;em>那么其实，浮点数有的时候也需要进行离散化，比如作为数组的下标，比如用来枚举。&lt;/em>&lt;/h4>
&lt;h4 id="做法上是和将较大的整数值离散化没有区别因为遇到的题目不多所以特意记录一下">&lt;em>做法上是和将较大的整数值离散化没有区别，因为遇到的题目不多，所以特意记录一下。&lt;/em>&lt;/h4>
&lt;p>&lt;strong>&lt;em>第二点是扫描线的思想：&lt;/em>&lt;/strong>&lt;/p></description></item><item><title>zoj 3606 Lazy Salesgirl (线段树，单点更新，区间合并)</title><link>https://111qqz.com/2017/09zoj-3606/</link><pubDate>Tue, 26 Sep 2017 12:52:37 +0000</pubDate><guid>https://111qqz.com/2017/09zoj-3606/</guid><description>
&lt;p>&lt;a href="http://acm.zju.edu.cn/onlinejudge/showProblem.do?problemCode=3606">zoj3606题目链接&lt;/a>&lt;/p>
&lt;p>题意：有个小女孩卖火柴,有n个人会来买，分别在时间t[i]，以价格p[i]，买的火柴个数为1+(k-1)%3,其中k为这是小女孩第几次卖火柴。 如果有大于w的时间没人来买火柴，小女孩就会睡着。小女孩睡着后如果有人来买火柴，那小女孩就会醒过来，但是不会卖给这个人火柴。现在问使营业额最大的基础上最小的时间间隔w。&lt;/p></description></item><item><title>hdu 4288 Coder (离散化， 线段树，单点更新，区间合并)</title><link>https://111qqz.com/2017/09hdu-4288/</link><pubDate>Tue, 26 Sep 2017 06:56:57 +0000</pubDate><guid>https://111qqz.com/2017/09hdu-4288/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=4288">题目链接&lt;/a>&lt;/p>
&lt;p>题意：n（1E5）个操作，分为三种，add x表示将x加到集合中（保证集合中之前没有x)，del x表示从集合中删掉x(保证集合中一定右x),sum表示求集合中所有元素按从小到大排列后，所有的下标中满足i%5=3的a[i]的和。1=&amp;lt;x&amp;lt;=1E9&lt;/p></description></item><item><title>BZOJ 1012: [JSOI2008]最大数maxnumber (线段树,,单点更新)</title><link>https://111qqz.com/2017/04bzoj-1012/</link><pubDate>Sat, 01 Apr 2017 09:20:48 +0000</pubDate><guid>https://111qqz.com/2017/04bzoj-1012/</guid><description>
&lt;h2 id="1012-jsoi2008最大数maxnumber">1012: [JSOI2008]最大数maxnumber&lt;/h2>
&lt;p>Time Limit: 3 Sec  Memory Limit: 162 MB
Submit: 9717  Solved: 4244
[&lt;a href="http://www.lydsy.com/JudgeOnline/submitpage.php?id=1012">Submit&lt;/a>][&lt;a href="http://www.lydsy.com/JudgeOnline/problemstatus.php?id=1012">Status&lt;/a>][&lt;a href="http://www.lydsy.com/JudgeOnline/bbs.php?id=1012">Discuss&lt;/a>]&lt;/p>
&lt;h2 id="description">Description&lt;/h2>
&lt;p>　　现在请求你维护一个数列，要求提供以下两种操作：1、 查询操作。语法：Q L 功能：查询当前数列中末尾L
个数中的最大的数，并输出这个数的值。限制：L不超过当前数列的长度。2、 插入操作。语法：A n 功能：将n加
上t，其中t是最近一次查询操作的答案（如果还未执行过查询操作，则t=0)，并将所得结果对一个固定的常数D取
模，将所得答案插入到数列的末尾。限制：n是非负整数并且在长整范围内。注意：初始时数列是空的，没有一个
数。&lt;/p></description></item><item><title>codeforces #381 div2 E. Alyona and towers (线段树 区间合并)</title><link>https://111qqz.com/2016/11cf740e/</link><pubDate>Mon, 28 Nov 2016 07:16:52 +0000</pubDate><guid>https://111qqz.com/2016/11cf740e/</guid><description>
&lt;p>e:题意：那个数，定义hill为一段连续的区间，满足该区间为严格单峰。现在有若干操作，每个操作是对某段区间的数同时增加一个数，问每次操作后，所有的hill中，宽度最大的（区间长度最大）的是多少。&lt;/p></description></item><item><title>hdu 5367 digger(动态线段树，区间合并)</title><link>https://111qqz.com/2016/11hdu-5367-digger/</link><pubDate>Sun, 27 Nov 2016 08:59:09 +0000</pubDate><guid>https://111qqz.com/2016/11hdu-5367-digger/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=5367">题目链接&lt;/a>&lt;/p>
&lt;p>题意：&lt;/p>
&lt;pre>&lt;code>地主小花有n座山，这些山在地主家门前排成一条直线。这些山一开始均有相同的高度。 每一天，小花都会要求ZJiaQ开挖机把几座山挖掉一定高度，或者给一些山堆上一些高度。并且要求报告ZJiaQ报告现在有多少座山属于“高山脉”
当一排山的高度相等，并且比这排山左边和右边的山要高时，这排山被称为高山脉。
当然，最左边和最右边的山不可能是“高山脉”的一部分
&lt;/code>&lt;/pre>
&lt;p>思路：线段树，要维护的域蛮多的。&lt;/p></description></item><item><title>hdu 3308 LCIS (线段树单点更新，区间合并)</title><link>https://111qqz.com/2016/11hdu-3308/</link><pubDate>Sat, 26 Nov 2016 11:21:26 +0000</pubDate><guid>https://111qqz.com/2016/11hdu-3308/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=3308">题目链接&lt;/a>&lt;/p>
&lt;p>题意：长度为n的序列，单点更新，或者询问某一个区间中最长连续严格递增序列的长度是多少。（此处的连续为位置连续，并非数值连续，也就是3,5,7,9，这样的就是满足题意的长度为4的序列）&lt;/p></description></item><item><title>hdu 4747 Mex （线段树lazy标记）</title><link>https://111qqz.com/2016/11hdu-4747-mex-lazy/</link><pubDate>Sun, 13 Nov 2016 10:10:47 +0000</pubDate><guid>https://111qqz.com/2016/11hdu-4747-mex-lazy/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=4747">题目连接&lt;/a>&lt;/p>
&lt;p>题意：给出n(n&amp;lt;=200000)个数，问所有区间[l,r]中mex的和。 （一个区间mex的定义为，这个区间中没有出现的最小的非负数）&lt;/p></description></item><item><title>codeforces 240 F. TorCoder (线段树)</title><link>https://111qqz.com/2016/10cf240f/</link><pubDate>Wed, 05 Oct 2016 12:05:16 +0000</pubDate><guid>https://111qqz.com/2016/10cf240f/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/240/F">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给一个仅由小写字母组成的字符串，然后m个操作，每个操作一个区间，要求把区间中排列成字典序最小的回文串，如果不能形成回文串，就忽略该操作。&lt;/p></description></item><item><title>codeforces 558 E. A Simple Task (线段树优化计数排序)</title><link>https://111qqz.com/2016/10cf558e/</link><pubDate>Tue, 04 Oct 2016 18:41:12 +0000</pubDate><guid>https://111qqz.com/2016/10cf558e/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/558/E">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出一个字符串，仅由小写字母组成。现在给出q个操作，每个操作l,r,k三个参数，k=1表示把区间[l,r]变为升序排列，k=0表示把区间[l,r]变为降序排列。&lt;/p></description></item><item><title>codeforces 145 E. Lucky Queries (线段树lazy标记)</title><link>https://111qqz.com/2016/09cf145e/</link><pubDate>Tue, 27 Sep 2016 11:15:53 +0000</pubDate><guid>https://111qqz.com/2016/09cf145e/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/145/E">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出一串只由数字'4&amp;rsquo;和'7&amp;rsquo;组成的串。两种操作，一种是询问整个串中最长非下降子序列的长度，另一种给出区间[l,r]，将区间中的没个数反转，反转的定义为，4变成7,7变成4.&lt;/p></description></item><item><title>codeforces 52 C. Circular RMQ (线段树区间更新，区间询问)</title><link>https://111qqz.com/2016/09cf52c/</link><pubDate>Sun, 25 Sep 2016 22:43:40 +0000</pubDate><guid>https://111qqz.com/2016/09cf52c/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/52/C">题目链接&lt;/a>&lt;/p>
&lt;p>题意：一个循环数列，两种操作，一种是把某段区间中加上v，另一种是询问某区间的最小值。对于每个询问，输出答案。&lt;/p>
&lt;p>思路：区间更新+区间询问的模板题&amp;hellip;.&lt;/p></description></item><item><title>codeforces 455 E. Function (斜率优化，线段树套凸包)</title><link>https://111qqz.com/2016/09cf455e/</link><pubDate>Sun, 25 Sep 2016 16:10:49 +0000</pubDate><guid>https://111qqz.com/2016/09cf455e/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/contest/455/problem/E">题目链接&lt;/a>
题意：已知 f(1, j) = a[j]
f[i][j] = min (f[i-1][j],f[i-1][j-1])
然后给出 n n≤1E5​​ 个数（a[i] a​i​​≤1E4​​)，给出 m组查询（m&amp;lt;=1E5），每组两个数 x,y 问 f(x,y) 是多少。&lt;/p></description></item><item><title>codeforces 380 C. Sereja and Brackets (线段树区间合并)</title><link>https://111qqz.com/2016/09cf380c/</link><pubDate>Fri, 23 Sep 2016 10:38:51 +0000</pubDate><guid>https://111qqz.com/2016/09cf380c/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/380/C">题目链接&lt;/a>
题意：给出一个由‘(’和‘）’组成的字符串。。。然后给出若干查询。。。每个查询一个区间，问区间中能匹配的括号数。。。&lt;/p>
&lt;p>思路：考虑某一个区间中的括号匹配。。。其实是一个不断寻找&amp;rsquo;()&amp;lsquo;然后删去的过程。。。&lt;/p></description></item><item><title>poj 2886 Who Gets the Most Candies? （线段树模拟加强版约瑟夫问题+反素数)</title><link>https://111qqz.com/2016/09poj-2886/</link><pubDate>Wed, 21 Sep 2016 17:03:08 +0000</pubDate><guid>https://111qqz.com/2016/09poj-2886/</guid><description>
&lt;p>&lt;a href="http://poj.org/problem?id=2886">poj 2886 题目链接&lt;/a>&lt;/p>
&lt;p>题意：n个人围成一圈，每个人身上由一个数，可正可负。从第k个人开始出圈，如果第k个人身上的数是X,X&amp;gt;0，就左边第x个没有出圈的人出圈，否则右边第-X个人出圈。 第k个人出圈得到的糖果数目为f(k)，f(x)表示x的因子个数。现在问谁能拿到最多的糖果，并且拿到了多少糖果。&lt;/p></description></item><item><title>codeforces #609 F. Frogs and mosquitoes (线段树+二分)</title><link>https://111qqz.com/2016/09codeforces-609-f-frogs-and-mosquitoes-/</link><pubDate>Tue, 20 Sep 2016 17:48:18 +0000</pubDate><guid>https://111qqz.com/2016/09codeforces-609-f-frogs-and-mosquitoes-/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/609/F">题目链接&lt;/a>&lt;/p>
&lt;p>题意：n只青蛙，第i只位于x[i],舌头长度为t[i]。m只蚊子，第i只蚊子所在位置为p[i],蚊子的大小为b[i]。&lt;/p>
&lt;p>蚊子按照出现顺序输入。&lt;/p>
&lt;p>一只青蛙能吃到蚊子当且仅当蚊子和青蛙在同一个位置，或者蚊子在青蛙右边并且与青蛙的距离小于等于该青蛙舌头的长度。&lt;/p></description></item><item><title>codeforces 540 E. Infinite Inversions (分类思想+线段树求逆序对)</title><link>https://111qqz.com/2016/09cf540e/</link><pubDate>Tue, 20 Sep 2016 12:07:02 +0000</pubDate><guid>https://111qqz.com/2016/09cf540e/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/540/E">题目链接&lt;/a>&lt;/p>
&lt;p>题意：一个无穷数列，从1开始，初始第i个位置上为i，给出n个swap，每次交换两个位置的数。问交换n次以后得到的数列中，逆序对的数。&lt;/p>
&lt;p>思路：&lt;/p>
&lt;p>官方题解：&lt;/p></description></item><item><title>codeforces 515 E. Drazil and Park ( 线段树区间合并)</title><link>https://111qqz.com/2016/09cf515e/</link><pubDate>Mon, 19 Sep 2016 10:54:47 +0000</pubDate><guid>https://111qqz.com/2016/09cf515e/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/515/E">题目链接&lt;/a>&lt;/p>
&lt;p>题意：圆上，询问任意一段弧中，任意两点的距离+两点的权值和的最大值。&lt;/p>
&lt;p>思路：&lt;/p>
&lt;p>1.环先拆成串，复制1..n到后面，变成1..2n。&lt;/p>
&lt;p>化简公式：&lt;/p>
&lt;p>2 * h[u] + 2 * h[v] + dist(u, v) = 2 * h[v] + d[1] + d[2] + &amp;hellip; + d[v-1] + 2 * h[u] - (d[1] + d[2] + &amp;hellip; + d[u-1]).&lt;/p></description></item><item><title>codeforces #351 D. Jeff and Removing Periods (线段树/树状数组判断位置成等差数列)</title><link>https://111qqz.com/2016/09cf351d/</link><pubDate>Sun, 18 Sep 2016 13:53:39 +0000</pubDate><guid>https://111qqz.com/2016/09cf351d/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/351/D">题目链接&lt;/a>
题意：有n个数，每次可以删除掉数值相同并且所在位置成等差数列（只删2个数或者只删1个数应该也是可以的），删掉这些数以后可以将剩下的数重新以任意顺序排列，称为一次操作。现在给出m个询问，每个询问一个区间[l,r]，问删光区间[l,r]中的数最少需要的操作次数。&lt;/p></description></item><item><title>spoj DQUERY - D-query (询问区间中不同数的个数，线段树(离线) or 莫队算法（离线） or 主席树（在线）)</title><link>https://111qqz.com/2016/09spoj-dquery/</link><pubDate>Sat, 17 Sep 2016 12:01:43 +0000</pubDate><guid>https://111qqz.com/2016/09spoj-dquery/</guid><description>
&lt;p>&lt;a href="http://www.spoj.com/problems/DQUERY/">题目链接&lt;/a>
题意：给出n个数，然后m个询问，每个询问一个区间[l,r],问该区间中不同的数有多少个。&lt;/p>
&lt;p>思路：离线处理+线段树的做法不多说了：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-cpp" data-lang="cpp">&lt;span class="line">&lt;span class="ln"> 1&lt;/span>&lt;span class="cl">&lt;span class="cm">/* ***********************************************
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 2&lt;/span>&lt;span class="cl">&lt;span class="cm">Author :111qqz
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 3&lt;/span>&lt;span class="cl">&lt;span class="cm">Created Time :Fri 16 Sep 2016 11:34:32 PM CST
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 4&lt;/span>&lt;span class="cl">&lt;span class="cm">File Name :code/spoj/dquery.cpp
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 5&lt;/span>&lt;span class="cl">&lt;span class="cm">************************************************ */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 6&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstdio&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 7&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstring&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 8&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;iostream&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln"> 9&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;algorithm&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">10&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;vector&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">11&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;queue&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">12&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;set&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">13&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;map&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">14&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;string&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">15&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cmath&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">16&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;cstdlib&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">17&lt;/span>&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;ctime&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">18&lt;/span>&lt;span class="cl">&lt;span class="cp">#define fst first
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">19&lt;/span>&lt;span class="cl">&lt;span class="cp">#define sec second
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">20&lt;/span>&lt;span class="cl">&lt;span class="cp">#define lson l,m,rt&amp;lt;&amp;lt;1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">21&lt;/span>&lt;span class="cl">&lt;span class="cp">#define rson m+1,r,rt&amp;lt;&amp;lt;1|1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">22&lt;/span>&lt;span class="cl">&lt;span class="cp">#define ms(a,x) memset(a,x,sizeof(a))
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">23&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">typedef&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="kt">long&lt;/span> &lt;span class="n">LL&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">24&lt;/span>&lt;span class="cl">&lt;span class="cp">#define pi pair &amp;lt; int ,int &amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">25&lt;/span>&lt;span class="cl">&lt;span class="cp">#define MP make_pair
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">26&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="k">using&lt;/span> &lt;span class="k">namespace&lt;/span> &lt;span class="n">std&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">27&lt;/span>&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">double&lt;/span> &lt;span class="n">eps&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1E-8&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">28&lt;/span>&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">dx4&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">29&lt;/span>&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">dy4&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">};&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">30&lt;/span>&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">inf&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mh">0x3f3f3f3f&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">31&lt;/span>&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">N&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">3E4&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">32&lt;/span>&lt;span class="cl">&lt;span class="k">const&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">M&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mf">2E5&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">7&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">33&lt;/span>&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">Q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">34&lt;/span>&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">35&lt;/span>&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">tree&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">N&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">36&lt;/span>&lt;span class="cl">&lt;span class="n">map&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span>&lt;span class="o">&amp;gt;&lt;/span>&lt;span class="n">mp&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">37&lt;/span>&lt;span class="cl">&lt;span class="k">struct&lt;/span> &lt;span class="nc">node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">38&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">39&lt;/span>&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">40&lt;/span>&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">id&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">41&lt;/span>&lt;span class="cl"> &lt;span class="kt">bool&lt;/span> &lt;span class="k">operator&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">node&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="k">const&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">42&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">43&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">44&lt;/span>&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="o">&amp;lt;&lt;/span>&lt;span class="n">b&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">45&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">46&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">47&lt;/span>&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">PushUp&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">rt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">48&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">49&lt;/span>&lt;span class="cl"> &lt;span class="n">tree&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">rt&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">tree&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">rt&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">tree&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">rt&lt;/span>&lt;span class="o">&amp;lt;&amp;lt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="o">|&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">50&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">51&lt;/span>&lt;span class="cl">&lt;span class="kt">void&lt;/span> &lt;span class="nf">update&lt;/span>&lt;span class="p">(&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">p&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">sc&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span> &lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">rt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">52&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">53&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">==&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">54&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">55&lt;/span>&lt;span class="cl"> &lt;span class="n">tree&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">rt&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="n">sc&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">56&lt;/span>&lt;span class="cl"> &lt;span class="k">return&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">57&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">58&lt;/span>&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">59&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sc&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">lson&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">60&lt;/span>&lt;span class="cl"> &lt;span class="k">else&lt;/span> &lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">p&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">sc&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rson&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">61&lt;/span>&lt;span class="cl"> &lt;span class="n">PushUp&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">rt&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">62&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">63&lt;/span>&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">R&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">rt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">64&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">65&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">&amp;amp;&amp;amp;&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">tree&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">rt&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">66&lt;/span>&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">67&lt;/span>&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">68&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="o">&amp;lt;=&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">ret&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">lson&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">69&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="o">&amp;gt;=&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">+=&lt;/span>&lt;span class="n">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">R&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">rson&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">70&lt;/span>&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">71&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">72&lt;/span>&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">M&lt;/span>&lt;span class="p">];&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">73&lt;/span>&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">74&lt;/span>&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">75&lt;/span>&lt;span class="cl"> &lt;span class="cp">#ifndef ONLINE_JUDGE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">76&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="n">freopen&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;code/in.txt&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s">&amp;#34;r&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">stdin&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">77&lt;/span>&lt;span class="cl"> &lt;span class="cp">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">78&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="n">cin&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">79&lt;/span>&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">80&lt;/span>&lt;span class="cl"> &lt;span class="n">cin&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&lt;/span>&lt;span class="n">Q&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">81&lt;/span>&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">Q&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">scanf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d %d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">),&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">82&lt;/span>&lt;span class="cl"> &lt;span class="n">sort&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">Q&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">83&lt;/span>&lt;span class="cl"> &lt;span class="kt">int&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">84&lt;/span>&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">Q&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">85&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">86&lt;/span>&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">cur&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">r&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">cur&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">87&lt;/span>&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">88&lt;/span>&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">mp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cur&lt;/span>&lt;span class="p">]])&lt;/span> &lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cur&lt;/span>&lt;span class="p">]],&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">89&lt;/span>&lt;span class="cl"> &lt;span class="n">mp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cur&lt;/span>&lt;span class="p">]]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">cur&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">90&lt;/span>&lt;span class="cl"> &lt;span class="n">update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">mp&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">a&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">cur&lt;/span>&lt;span class="p">]],&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">91&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">92&lt;/span>&lt;span class="cl"> &lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">query&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">l&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">q&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">].&lt;/span>&lt;span class="n">r&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">93&lt;/span>&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">94&lt;/span>&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="p">(&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="n">Q&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">ans&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">95&lt;/span>&lt;span class="cl"> &lt;span class="cp">#ifndef ONLINE_JUDGE
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">96&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="n">fclose&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">stdin&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">97&lt;/span>&lt;span class="cl"> &lt;span class="cp">#endif
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">98&lt;/span>&lt;span class="cl">&lt;span class="cp">&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="ln">99&lt;/span>&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;del>之后补一个主席树的做法&lt;/del>&lt;/p></description></item><item><title>codeforces 338 E. Optimize! (线段树维护最小前缀和）</title><link>https://111qqz.com/2016/09codeforces-338-e-optimize/</link><pubDate>Fri, 16 Sep 2016 10:13:51 +0000</pubDate><guid>https://111qqz.com/2016/09codeforces-338-e-optimize/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/contest/338/problem/E">题目链接&lt;/a>&lt;/p>
&lt;p>题意：题意是由伪代码给出的。。手算模拟了一下(noip初赛即视感），题意大概是说，给出两个数组a和b，a数组长度为n,b数组长度为len,然后从a中截取连续的len个元素，称为数组s，如果存在一种方法使得s中元素和b中的元素一一对应且每组和都大于等于h,则称这个s是合法的。现在问a中有多少个合法的s。
具体来说，对于样例
5 2 10
5 3
1 8 5 5 7&lt;/p></description></item><item><title>BZOJ 1756: Vijos1083 小白逛公园　 （线段树维护单点修改区间查询最大子段和）</title><link>https://111qqz.com/2016/09bzoj-1756/</link><pubDate>Thu, 15 Sep 2016 21:51:33 +0000</pubDate><guid>https://111qqz.com/2016/09bzoj-1756/</guid><description>
&lt;h2 id="1756-vijos1083-小白逛公园">1756: Vijos1083 小白逛公园&lt;/h2>
&lt;p>Time Limit: 10 Sec  Memory Limit: 64 MB
Submit: 1078  Solved: 353
[&lt;a href="http://www.lydsy.com/JudgeOnline/submitpage.php?id=1756">Submit&lt;/a>][&lt;a href="http://www.lydsy.com/JudgeOnline/problemstatus.php?id=1756">Status&lt;/a>][&lt;a href="http://www.lydsy.com/JudgeOnline/bbs.php?id=1756">Discuss&lt;/a>]&lt;/p>
&lt;h2 id="description">Description&lt;/h2>
&lt;p>小新经常陪小白去公园玩，也就是所谓的遛狗啦…在小新家附近有一条“公园路”，路的一边从南到北依次排着n个公园，小白早就看花了眼，自己也不清楚该去哪些公园玩了。 　　一开始，小白就根据公园的风景给每个公园打了分-.-。小新为了省事，每次遛狗的时候都会事先规定一个范围，小白只可以选择第a个和第b个公园之间（包括a、b两个公园）选择连续的一些公园玩。小白当然希望选出的公园的分数总和尽量高咯。同时，由于一些公园的景观会有所改变，所以，小白的打分也可能会有一些变化。 　　那么，就请你来帮小白选择公园吧。&lt;/p></description></item><item><title>hit oj 2687 Candy (线段树动态维护最大连续子段)</title><link>https://111qqz.com/2016/09hit-oj-2687-candy/</link><pubDate>Thu, 15 Sep 2016 21:04:48 +0000</pubDate><guid>https://111qqz.com/2016/09hit-oj-2687-candy/</guid><description>
&lt;p>&lt;a href="http://acm.hit.edu.cn/hoj/problem/view?id=2687">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出n个数,m个修改，每次修改后询问整个区间的最大连续子段。&lt;/p>
&lt;p>思路：考虑一段区间，分成左右两个子区间，这段区间的最大子段有三种情况：只在左区间中，只在右区间中，既在左区间中又在右区间中。前两种很好维护，对于后一种，我们新增加线段树的两个域，mxl,mxr，分别表示一个区间中包含左端点在的最大字段和（也就是最大前缀和），和一个区间中包含右端点在的最大子段和（也就是最大后缀和），然后对于最大子段既在左区间又在右区间的情况，只需要合并【左区间的最大后缀和 】和【右区间的最大前缀和】就好。&lt;/p></description></item><item><title>codeforces 501 D Misha and Permutations Summation (康托展开+康托逆展开+factorial_number_system+线段树×2)</title><link>https://111qqz.com/2016/09codeforces-501-d-misha-and-permutations-summation-factorial_number_systemx2/</link><pubDate>Wed, 14 Sep 2016 07:05:21 +0000</pubDate><guid>https://111qqz.com/2016/09codeforces-501-d-misha-and-permutations-summation-factorial_number_systemx2/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/501/D">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出两个排列，定义ord(p)为排列p的顺序（字典顺从小到大），定义perm(x)为顺序为x的排列，现在要求
&lt;img class="image_figure image_external" loading="lazy" src="http://codeforces.com/predownloaded/46/04/46046198f19147fb9f021abaacf5458998990830.png" alt="" />
 1 ≤ &lt;em>n&lt;/em> ≤ 200 000&lt;/p>
&lt;p>思路：首先去学了一下康托展开和逆展开。。。其实就是对于这种排列之类的问题。。。的一个比较省空间的hash函数。。。？&lt;/p></description></item><item><title>light oj 1080 Binary Simulation (线段树lazy标记，区间更新，单点查询)</title><link>https://111qqz.com/2016/09light-oj-1080-binary-simulation-lazy/</link><pubDate>Tue, 13 Sep 2016 17:41:49 +0000</pubDate><guid>https://111qqz.com/2016/09light-oj-1080-binary-simulation-lazy/</guid><description>
&lt;p>&lt;a href="http://vjudge.net/contest/131848#problem/A">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出一个长度为n的数列，每个位置是0或者1，给出q个操作，操作有两种类型，分别是将一段区间中反转，和询问当前某位置是0还是1&lt;/p>
&lt;p>思路：lazy标记。lazy[i]记录以i节点为根节点的子树对应的区间中被翻转的次数，初始为0.然后查询的时候，根据被翻转次数的奇偶性确定答案。&lt;/p></description></item><item><title>codeforces 356 A. Knight Tournament (线段树lazy标记，倒序处理)</title><link>https://111qqz.com/2016/09cf356a/</link><pubDate>Tue, 06 Sep 2016 19:19:11 +0000</pubDate><guid>https://111qqz.com/2016/09cf356a/</guid><description>
&lt;blockquote>[题目链接](http://codeforces.com/problemset/problem/356/A)
题意：现在有N个骑士进行M轮PK...现在告诉这M轮是谁站在台上...其将l~r所存在的骑士都打败..而若一个骑士被打败..就出局了..也就是不存在了...请输出每个骑士是被哪个骑士打败的(最后的胜利者输出0)...保证有解..&lt;/blockquote>
&lt;p>思路：由于先前被打败的骑士直接就退场了。。。所以如果不做判断。。那么之后胜利的骑士会干扰之前的结果。。。&lt;/p></description></item><item><title>codeforces 292 E. Copying Data (染色问题，线段树lazy标记模板题)</title><link>https://111qqz.com/2016/09cf292e/</link><pubDate>Tue, 06 Sep 2016 13:57:54 +0000</pubDate><guid>https://111qqz.com/2016/09cf292e/</guid><description>
&lt;p>x&lt;a href="http://codeforces.com/problemset/problem/292/E">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出两个数组，每个数组n个数，分别为a和b,给出m个操作，操作有两种类型，第一种是给出x,y,k,表示从a数组的x坐标开始复制k个数到b数组的y到y+k-1。&lt;/p></description></item><item><title>codeforces 474 F. Ant colony (线段树求gcd+统计区间中某数出现的次数的经典做法)</title><link>https://111qqz.com/2016/09cf474f/</link><pubDate>Mon, 05 Sep 2016 13:42:23 +0000</pubDate><guid>https://111qqz.com/2016/09cf474f/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/474/F">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出n个数，m个查询，每组查询一个区间[l,r]，问[l,r]中会被吃掉多少个（区间[l,r]中的数只有当其是其他所有数的因数时才不会被吃掉,&lt;strong>顺便问一句。。a divide b 是 a除b,也就是b除以a,b/a的意思嘛23333）&lt;/strong>&lt;/p></description></item><item><title>codeforces 61 E. Enemy is weak (离散化+线段树求逆序三元组)</title><link>https://111qqz.com/2016/09cf61e/</link><pubDate>Mon, 05 Sep 2016 08:35:49 +0000</pubDate><guid>https://111qqz.com/2016/09cf61e/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/61/E">题目链接&lt;/a>
题意：给出n个数，求满足 i&amp;lt;j&amp;lt;k且a[i]&amp;gt;a[j]&amp;gt;a[k]的三元组有多少个。&lt;/p>
&lt;p>思路：&lt;strong>对于这种要求三个数满足条件的题目，老司机的经验是考虑中间那个数，这道题也不例外。&lt;/strong>&lt;/p></description></item><item><title>codeforces 459 D. Pashmak and Parmida's problem (离散化+线段树求逆序对数)</title><link>https://111qqz.com/2016/09cf459d/</link><pubDate>Mon, 05 Sep 2016 07:23:18 +0000</pubDate><guid>https://111qqz.com/2016/09cf459d/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/459/D">题目链接&lt;/a>
题意：定义_f_(&lt;em>l&lt;/em>, &lt;em>r&lt;/em>, &lt;em>x&lt;/em>)为区间[l,r]中x出现的次数。现在要求calculate the number of pairs of indicies &lt;em>i&lt;/em>, &lt;em>j&lt;/em> (1 ≤ &lt;em>i&lt;/em> &amp;lt; &lt;em>j&lt;/em> ≤ &lt;em>n&lt;/em>) such that_f_(1, &lt;em>i&lt;/em>, &lt;em>a__i&lt;/em>) &amp;gt; &lt;em>f&lt;/em>(&lt;em>j&lt;/em>, &lt;em>n&lt;/em>, &lt;em>a__j&lt;/em>).&lt;/p>
&lt;p>思路：可以通过o(n)预处理出f(1,i,a[i])和f[j,n,a[j]]，其实预处理的过程就是离散化的过程呢。。。&lt;/p></description></item><item><title>codeforces 339 D. Xenia and Bit Operations(线段树)</title><link>https://111qqz.com/2016/09cf339d/</link><pubDate>Sun, 04 Sep 2016 17:48:11 +0000</pubDate><guid>https://111qqz.com/2016/09cf339d/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/339/D">题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出n和m,初始给出1&amp;laquo;n个数，先相邻的两个数进行&lt;strong>或操作&lt;/strong>（a[1]^a[2],a[3]^a[4]&amp;hellip;），得到的新数列再相邻的两个数进行&lt;strong>异或操作&lt;/strong>。&lt;/p></description></item><item><title>codeforces 19 D. Points (离散化+树套树（线段树+set）)</title><link>https://111qqz.com/2016/09cf19d/</link><pubDate>Sun, 04 Sep 2016 13:47:07 +0000</pubDate><guid>https://111qqz.com/2016/09cf19d/</guid><description>
&lt;p>&lt;a href="http://codeforces.com/problemset/problem/19/D">题目链接&lt;/a>&lt;/p>
&lt;p>题意：&lt;/p>
&lt;blockquote>在二维坐标平面内进行_n_ (1 ≤ _n_ ≤ 2·105) 次操作。一共有三种类型操作。
&lt;p>1.add x,y 将点(x,y)加进坐标系。&lt;/p>
&lt;p>2.remove x,y 将点(x,y)移除.&lt;/p>
&lt;p>3.find x,y 找到点(x,y)右上角的点(xp&amp;gt;x,yp&amp;gt;y)。如果有多个输出x最小的。还是有多个输出y最小的。&lt;/p></description></item><item><title>poj 2828 Buy Tickets (线段树单点更新，逆序插入)</title><link>https://111qqz.com/2016/09poj-2828/</link><pubDate>Sat, 03 Sep 2016 13:26:54 +0000</pubDate><guid>https://111qqz.com/2016/09poj-2828/</guid><description>
&lt;p>&lt;a href="http://poj.org/problem?id=2828">poj 2828 题目链接&lt;/a>&lt;/p>
&lt;p>题意：n个人，每个人有一个rp值（用来区分不同的人），还有一个pos[i]，表示当第i个人来排队的时候插入到第pos[i]个人的后面（也就是排在位置pos[i]+1)&lt;/p></description></item><item><title>hdu 1754 I Hate It (线段树模板题，炒鸡详细注释版)</title><link>https://111qqz.com/2016/08hdu-1754/</link><pubDate>Thu, 18 Aug 2016 11:47:41 +0000</pubDate><guid>https://111qqz.com/2016/08hdu-1754/</guid><description>
&lt;p>&lt;a href="http://acm.split.hdu.edu.cn/showproblem.php?pid=1754">hdu 1754 题目链接&lt;/a>
题意：单点更新，区间查询最大值。
思路：线段树。
一开始借鉴了clj的pointer写法。。&lt;a href="http://codeforces.com/contest/438/submission/6770765">wjmzbmr&amp;rsquo;s code&lt;/a> 直接MLE。。。看来也许只能在cf上用。。。
下面是MLE的代码：&lt;/p></description></item><item><title>线段树学习笔记</title><link>https://111qqz.com/2016/08/</link><pubDate>Thu, 18 Aug 2016 09:19:31 +0000</pubDate><guid>https://111qqz.com/2016/08/</guid><description>
&lt;p>嘛，终于下定决心搞定线段树了。&lt;/p>
&lt;p>之前几次都是被lazy标记卡住，这次大概不会了吧2333&lt;/p>
&lt;p>放一些学习资料，最后比较zkw线段树和普通线段树的区别。&lt;/p>
&lt;p>&lt;a href="http://codeforces.com/blog/entry/18051">codeforces上非递归线段树讲解&lt;/a> （其实就是zkw吧）&lt;/p></description></item><item><title>hdoj 2795 Billboard</title><link>https://111qqz.com/2015/12hdoj2795/</link><pubDate>Thu, 17 Dec 2015 09:03:02 +0000</pubDate><guid>https://111qqz.com/2015/12hdoj2795/</guid><description>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=2795">http://acm.hdu.edu.cn/showproblem.php?pid=2795&lt;/a>
题意：一个尺寸为w&lt;em>h的方格。要按顺序放放n个尺寸为1&lt;/em>wi的纸条。问每一个纸条回被放在哪里。如果有多个，放在最上面（编号小）
思路：把没横行能放的最大长度看做一个序列建树。由于h比n大很多。。多出来的没用。。直接取较小值就行。&lt;/p></description></item><item><title>hdu 3333 Turing Tree (求区间中不相同数的和，离线+线段树/树状数组)</title><link>https://111qqz.com/2015/08hdu3333/</link><pubDate>Fri, 07 Aug 2015 18:42:00 +0000</pubDate><guid>https://111qqz.com/2015/08hdu3333/</guid><description>
&lt;h1>&lt;/h1>
&lt;p>&lt;a href="http://acm.hdu.edu.cn/showproblem.php?pid=3333">题目链接&lt;/a>&lt;/p>
&lt;p>喵呜，离散树状数组。&lt;/p>
&lt;p>这道题由于相同的值加和的时候只算一次，所以比较伤脑筋==&lt;/p>
&lt;p>怎么办呢？&lt;/p>
&lt;p>我们发现对于一个值，由于相同的只算一次，所以在任意时间内，这个值只需要出现一次。&lt;/p></description></item><item><title>poj 2481 Cows(树状数组||线段树)</title><link>https://111qqz.com/2015/08poj2481/</link><pubDate>Mon, 03 Aug 2015 19:32:00 +0000</pubDate><guid>https://111qqz.com/2015/08poj2481/</guid><description>
&lt;p>&lt;a href="http://poj.org/problem?id=2481">poj 2481 题目链接&lt;/a>&lt;/p>
&lt;p>题意：给定n个区间，问对于每个区间，有多少个区间真包含该区间（真包含的意思是说，两个区间不能完全重合）&lt;/p>
&lt;p>思路：&lt;/p>
&lt;blockquote>下面是一年前用树状数组过掉的时候写的题解：
 和 star那道题差不多。
&lt;p>需要注意的是star那道题读入的时候已经排好了序，而这道题没有排序&lt;/p></description></item><item><title>poj 2352 Stars （树状数组||线段树）</title><link>https://111qqz.com/2015/08poj2352/</link><pubDate>Mon, 03 Aug 2015 17:29:00 +0000</pubDate><guid>https://111qqz.com/2015/08poj2352/</guid><description>
&lt;p>&lt;a href="http://poj.org/problem?id=2352">poj 2352题目链接&lt;/a>&lt;/p>
&lt;p>题意：给出n个星星的位置，一个星星的level定义为其左下角（不严格）星星的数量。&lt;/p>
&lt;p>要求统计0到n-1 level的星星各有多少个。&lt;/p></description></item></channel></rss>